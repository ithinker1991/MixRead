# 用户反馈问题评估报告

**日期**: 2025-11-29
**评估范围**: 4个核心问题的复杂度和实现成本

---

## 问题 1: 词形变化识别 (Morphological Variants)

### 问题描述
- `stranger` 能识别，但 `strangers` 无法识别
- `drop` 能识别，但 `dropped`, `drops`, `dropping` 无法识别
- `pull` 能识别，但 `pulled`, `pulls`, `pulling` 无法识别
- 影响: **~30-40% 的词在文本中以变化形式出现**

### 根本原因
词库存储基础词，不包含变化形式（复数、过去式、ing形式等）

### 解决方案对比

| 方案 | 实现方式 | 复杂度 | 成本 | 效果 |
|------|--------|--------|------|------|
| **A: 词库扩展** | 添加所有词形变体到词库 | ⭐⭐⭐⭐⭐ 很高 | 2-3周 | 100% |
| **B: 词干提取 (Stemming)** | 前端提取词干后查询 | ⭐⭐⭐ 中 | 3-5天 | 80-85% |
| **C: 词形还原 (Lemmatization)** | 使用 NLP 库还原原形 | ⭐⭐⭐⭐ 高 | 1周 | 90-95% |
| **D: 混合方案** | Stemming + 常见变体查询表 | ⭐⭐⭐ 中 | 1周 | 90%+ |

### 推荐方案
**方案 D (混合)** - 最佳性价比
- 实现前端简单词干提取
- 维护常见变体查询表
- 成本: ~5 工作日
- 效果: 90%+ 准确率

### 示例代码
```javascript
// 前端词干提取
function stemWord(word) {
  // 简单规则
  if (word.endsWith('ies')) return word.slice(0, -3) + 'y';
  if (word.endsWith('ed')) return word.slice(0, -2);
  if (word.endsWith('ing')) return word.slice(0, -3);
  if (word.endsWith('s')) return word.slice(0, -1);
  return word;
}
```

---

## 问题 2: 特定词汇无法高亮

### 问题描述
- `Encyclopedia Britannica` - 没有高亮
- `biography` - 在词库中但没有高亮
- `jockish` - 不在词库中

### 根本原因分析

#### 词汇情况
| 词汇 | 在库？ | 有翻译？ | 难度 | API 可高亮？ |
|------|-------|---------|------|-------------|
| encyclopedia | ✅ | ✅ | B1 | ✅ 可以 |
| biography | ✅ | ✅ | B1 | ✅ 可以 |
| britannica | ❌ | - | - | ❌ 不能 |
| jockish | ❌ | - | - | ❌ 不能 |

#### 可能原因（需确认）
1. **大小写问题**: 前端文本提取可能没有正确转小写
2. **专有名词问题**: "Britannica" 是专有名词，通常大写
3. **衍生词问题**: "jockish" 是 "jock" 的衍生词，词库中没有

### 解决方案

| 方案 | 成本 | 效果 | 优先级 |
|------|------|------|--------|
| 修复前端大小写处理 | 几小时 | 50% | 🔴 高 |
| 添加常见衍生词 | 3-5天 | 70% | 🟡 中 |
| 导入专有名词库 | 1周 | 可选 | 🟢 低 |

### 推荐方案
1. **立即**: 检查并修复前端大小写处理
2. **后续**: 从 KyleBing 库中提取更多衍生词（如 jockish, etc）

---

## 问题 3: 短语识别 (Multi-word Expressions)

### 问题描述
- `dropped out` - 应识别为成语，而不是两个独立词
- `pulled up` - 同样的问题
- 还有: `give up`, `put off`, `take care of`, etc.

### 复杂度评估

| 维度 | 评估 | 说明 |
|------|------|------|
| **词库扩展** | ⭐⭐⭐⭐ 高 | 需要标注 5000+ 常见短语 |
| **前端识别** | ⭐⭐⭐⭐⭐ 很高 | 需要 n-gram 和上下文分析 |
| **后端支持** | ⭐⭐⭐ 中 | 新增短语表和查询 API |
| **测试成本** | ⭐⭐⭐⭐ 高 | 短语歧义和边界情况复杂 |

### 解决方案对比

| 方案 | 时间 | 成本 | 效果 | 优先级 |
|------|------|------|------|--------|
| **A: 短语数据库** | 2-3周 | 中 | 80-90% | 🟢 低 |
| **B: 用户标记** | 1天 | 低 | 0% (但可扩展) | 🟡 中 |
| **C: ML 模型** | 1个月+ | 高 | 95%+ | 🔴 优化阶段 |

### 推荐方案
**Phase 2 + 用户反馈驱动**
- MVP 不支持短语识别
- 维护常见短语黑名单（避免错误高亮）
- 用户可标记重要短语
- 后续版本升级

---

## 问题 4: 某些网站无法标注

### 问题描述
https://waitbutwhy.com/2015/05/elon-musk-introduction.html 无法进行标注

### 可能原因分析

| 原因 | 概率 | 检查方法 | 难度 |
|------|------|--------|------|
| **动态内容加载** | 高 (60%) | 检查 JavaScript 渲染 | ⭐⭐⭐ |
| **内容隔离 (iframe)** | 中 (20%) | 检查 DOM 结构 | ⭐⭐ |
| **CSS 隐藏内容** | 低 (10%) | 检查样式 | ⭐⭐ |
| **反爬虫机制** | 低 (10%) | 检查网络请求 | ⭐⭐⭐ |

### 诊断步骤
```javascript
// 在浏览器控制台运行
console.log('页面加载完成？', document.readyState);
console.log('动态内容？', document.querySelectorAll('[data-loaded]').length);
console.log('iframe 数量？', document.querySelectorAll('iframe').length);
console.log('文本节点数？', document.querySelectorAll('*').length);
```

### 解决方案

| 解决方案 | 成本 | 效果 | 优先级 |
|---------|------|------|--------|
| **改进文本提取** | 1-2天 | 70% | 🔴 高 |
| **支持 iframe 内容** | 3-5天 | 90% | 🟡 中 |
| **动态内容等待** | 3-5天 | 95% | 🟡 中 |
| **网站白名单** | 1天 | 100%(该站) | 🟢 低 |

### 推荐方案
1. **立即**: 改进内容提取和渲染等待
2. **后续**: 维护网站兼容性列表

---

## 总体优先级和成本估算

### 按优先级排序

| # | 问题 | 优先级 | 实现时间 | 用户影响 | 推荐 |
|---|------|--------|---------|---------|------|
| 1 | 词形变化 (Morphological) | 🔴 高 | 5天 | 很高 | ✅ 立即做 |
| 2 | 前端大小写/衍生词 | 🔴 高 | 2天 | 高 | ✅ 立即做 |
| 4 | 网站兼容性 | 🟡 中 | 5天 | 中 | ⏭️ 周2 |
| 3 | 短语识别 | 🟢 低 | 2周+ | 低 | ⏳ Phase 2 |

### 成本估算

```
快速方案 (问题1+2):  7-8 工作日  → 解决 70-80% 问题
完整方案 (问题1-3):  3-4 周      → 解决 90%+ 问题
全部方案 (含问题4):  4-5 周      → 解决 95%+ 问题
```

---

## 建议执行计划

### Phase 1A (本周 - 2-3天) - 快速高收益
- [ ] 修复前端大小写处理
- [ ] 实现词干提取 (stemming)
- [ ] 测试 encyclopedia, biography 等词
- **预期效果**: 识别准确率 +20-30%

### Phase 1B (下周 - 3-5天) - 深层改进
- [ ] 改进文本节点提取 (处理动态内容)
- [ ] 添加常见衍生词 (jockish, etc)
- [ ] 网站兼容性测试
- **预期效果**: 支持 95%+ 网站

### Phase 2 (2-3周) - 高级功能
- [ ] 短语识别数据库
- [ ] 用户自定义短语
- [ ] ML 增强型识别
- **预期效果**: 95%+ 的单词和短语识别

---

## 关键建议

### 🎯 立即开始
**问题 1 + 2** (词形变化 + 大小写处理)
- 工作量: 5-7 天
- 用户影响: 最高
- 技术难度: 低-中

### ⏭️ 随后进行
**问题 4** (网站兼容性)
- 先做诊断，找到真正原因
- 然后针对性修复
- 建立网站兼容性测试框架

### ⏳ Phase 2
**问题 3** (短语识别)
- 等待更多用户反馈
- 收集常见短语列表
- 后续版本支持

---

## 参考数据

- 英文文本中 **30-40% 词** 以非基础形式出现 (复数/变位)
- 常见短语: **2000+** 值得支持的短语
- 网站覆盖率: 改进后应达 **95%+**

