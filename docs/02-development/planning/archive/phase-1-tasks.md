# MixRead 第一阶段任务拆解与验证方案

基于 `DevelopPlan.md` 的规划

生成时间: 2025-11-28

---

## 📍 当前状态评估

### ✅ 已完成功能

| MVP 功能 | 状态 | 完成度 | 备注 |
|----------|------|--------|------|
| 难词标注 | ✅ 完成 | 100% | 基于 CEFR A1-C2 |
| 中文释义 | ✅ 完成 | 97% | 6539词，95%+覆盖率 |
| 难度调节 | ✅ 完成 | 100% | A1-C2 滑杆 |
| 加入词库 | ✅ 完成 | 100% | Chrome Storage |
| 悬停显示 | ✅ 完成 | 80% | 有tooltip但需优化 |
| 词汇统计 | ⚠️ 部分 | 40% | 只有词库数量 |

### ⚠️ 与 DevelopPlan 的差异

**重要发现：**
- DevelopPlan 明确说"**不要做中文翻译**"（第66行）
- 但我们已经实现了中文翻译（97%覆盖率）

**建议：**
1. **保留中文翻译作为可选功能**（用户可关闭）
2. **强化英文解释**（当前缺少简明英文定义）
3. **默认显示英文**，中文作为辅助

---

## 🎯 第一阶段（MVP）剩余任务

根据 DevelopPlan.md 第27-103行，第一阶段目标：

> "验证用户愿意连续使用 3 次，并觉得'爽'"

### 任务 1: 英文解释增强 ⭐⭐⭐

**需求（DevelopPlan 第55-68行）:**
- 悬停时显示简明英文解释
- 提供例句
- 发音按钮（可选）
- 注意：不要让用户依赖中文翻译

**任务拆解：**

**1.1 集成英文词典 API**
- [ ] 选择 API：Free Dictionary API（已在用）或 Merriam-Webster
- [ ] 提取简明英文定义（第一释义，<20词）
- [ ] 缓存定义，减少 API 调用
- [ ] 处理 API 失败情况

**1.2 优化 Tooltip UI**
- [ ] 重新设计tooltip布局：
  ```
  ┌────────────────────────────┐
  │ beautiful (B1)             │
  │                            │
  │ 🔊 [English Definition]    │
  │ "Pleasing the senses or    │
  │  mind aesthetically"       │
  │                            │
  │ 💡 Example:                │
  │ "A beautiful sunset"       │
  │                            │
  │ 中文：美丽的 (可折叠)        │
  │                            │
  │ [Add to Library] [🔊 Play] │
  └────────────────────────────┘
  ```
- [ ] 英文定义放在首位（强调）
- [ ] 中文翻译可折叠/隐藏
- [ ] 添加发音按钮（调用 Web Speech API）

**1.3 发音功能**
- [ ] 使用 Web Speech API 或第三方 TTS
- [ ] 添加发音按钮
- [ ] 支持美音/英音切换（可选）

**验证标准：**
```javascript
// 自动化测试
describe('English Definition Feature', () => {
  test('tooltip shows English definition first', async () => {
    // 点击高亮词
    // 检查 tooltip 是否显示
    // 验证英文定义在中文之前
    // 验证定义长度 < 100 字符
  });

  test('pronunciation works', async () => {
    // 点击发音按钮
    // 验证音频播放
  });

  test('Chinese is collapsible', async () => {
    // 检查中文是否可折叠
    // 默认状态（展开/折叠）
  });
});
```

**完成指标：**
- ✅ 100% 高亮词有英文定义
- ✅ 定义简洁（<20词）
- ✅ 发音功能可用
- ✅ 中文可选显示

---

### 任务 2: 词汇统计完善 ⭐⭐

**需求（DevelopPlan 第85-93行）:**
- 词库数量
- 每天新增词
- 每周阅读时长（可选）

**任务拆解：**

**2.1 数据收集**
- [ ] 记录用户行为：
  - 每个词的添加时间
  - 每次阅读的时长
  - 每天访问的页面数
- [ ] 数据结构设计：
  ```javascript
  {
    vocabulary: [
      { word: 'beautiful', addedAt: '2025-11-28', reviewCount: 0 },
      ...
    ],
    stats: {
      totalWords: 120,
      todayAdded: 5,
      thisWeekAdded: 23,
      readingTime: { // 每日阅读时长（分钟）
        '2025-11-28': 15,
        '2025-11-27': 22,
        ...
      }
    }
  }
  ```

**2.2 统计面板 UI**
- [ ] 在 popup 中添加统计区域
- [ ] 显示：
  - 📚 词库总数
  - ⬆️ 今日新增
  - 📈 本周新增
  - ⏱️ 本周阅读时长
- [ ] 简单的图表（可选）

**验证标准：**
```javascript
describe('Vocabulary Statistics', () => {
  test('tracks daily new words', () => {
    // 添加词汇
    // 检查今日新增计数
  });

  test('calculates reading time', () => {
    // 模拟阅读会话
    // 验证时长计算正确
  });

  test('displays stats in popup', () => {
    // 打开popup
    // 验证统计数据显示
  });
});
```

**完成指标：**
- ✅ 词库数量准确
- ✅ 每日新增统计
- ✅ 阅读时长记录
- ✅ UI 美观易读

---

### 任务 3: 用户体验优化 ⭐⭐

**需求：**
让用户感受到"阅读压力被降低了"

**任务拆解：**

**3.1 性能优化**
- [ ] 减少页面加载时高亮延迟
- [ ] 优化大页面处理（>10000词）
- [ ] 前端缓存词汇信息
- [ ] 批量API调用优化

**3.2 交互优化**
- [ ] 高亮颜色优化（更柔和）
- [ ] 添加淡入动画
- [ ] 键盘快捷键支持（可选）
- [ ] 双击高亮词快速添加到词库

**3.3 Bug修复**
- [ ] MutationObserver 无限循环（已修复，需验证）
- [ ] 动态内容高亮
- [ ] 特殊字符处理
- [ ] 跨域iframe支持

**验证标准：**
```javascript
describe('User Experience', () => {
  test('highlighting completes within 2s', () => {
    // 加载测试页面
    // 测量高亮时间
    // 验证 < 2000ms
  });

  test('smooth animations', () => {
    // 检查 CSS 动画
    // 验证流畅度
  });

  test('handles large pages', () => {
    // 加载 10000+ 词页面
    // 验证不卡顿
  });
});
```

**完成指标：**
- ✅ 高亮延迟 < 2秒
- ✅ 大页面流畅
- ✅ 无明显 bug
- ✅ 动画流畅

---

### 任务 4: MVP 验证准备 ⭐⭐⭐

**目标（DevelopPlan 第95-103行）:**
验证以下三点：
1. 用户是否连续使用 3 天？
2. 是否愿意分享给朋友？
3. 是否认为"阅读变轻松"？

**任务拆解：**

**4.1 使用数据收集**
- [ ] 匿名用户ID生成
- [ ] 记录关键指标：
  - 每日使用次数
  - 每次使用时长
  - 添加词汇数
  - 页面浏览数
- [ ] 本地存储（不上传服务器）

**4.2 用户反馈机制**
- [ ] 添加简单反馈按钮
- [ ] 3天后弹出问卷：
  ```
  1. 你觉得 MixRead 有帮助吗？
     ⭐⭐⭐⭐⭐
  2. 你会推荐给朋友吗？
     [ ] 非常愿意 [ ] 可能会 [ ] 不会
  3. 使用后的感受？
     [ ] 阅读变轻松 [ ] 有帮助但不明显 [ ] 没什么用
  ```
- [ ] 收集反馈到本地

**4.3 分享功能**
- [ ] 生成分享卡片
- [ ] 显示用户成就：
  ```
  我用 MixRead 学习了 120 个单词！
  本周阅读了 15 篇文章。
  [下载 MixRead]
  ```
- [ ] 一键分享到社交媒体

**验证标准：**
```javascript
describe('MVP Validation', () => {
  test('tracks usage over 3 days', () => {
    // 模拟3天使用
    // 验证数据记录
  });

  test('shows feedback form after 3 days', () => {
    // 快进到第3天
    // 验证问卷显示
  });

  test('generates share card', () => {
    // 生成分享卡片
    // 验证内容正确
  });
});
```

**完成指标：**
- ✅ 使用数据完整记录
- ✅ 3天后显示问卷
- ✅ 分享功能可用
- ✅ 至少3个测试用户

---

## 🧪 自动化验证方案

### 1. 单元测试

**后端（pytest）**
```python
# 测试所有API端点
# 测试词典质量
# 测试性能

pytest backend/tests/ -v --cov=backend --cov-report=html
```

**前端（Jest）**
```javascript
// 测试扩展功能
// 测试UI组件
// 测试数据存储

npm test -- --coverage
```

### 2. 集成测试

**端到端测试（Puppeteer）**
```javascript
// 模拟完整用户流程：
// 1. 加载页面
// 2. 验证高亮
// 3. 点击tooltip
// 4. 添加到词库
// 5. 检查统计

npx puppeteer-test e2e/
```

### 3. 性能测试

**Lighthouse CI**
```bash
# 测试页面加载性能
# 测试扩展性能影响
# 生成性能报告

lighthouse --view https://test-page.com
```

### 4. 用户测试

**真实用户测试计划**
- [ ] 招募 3-5 个测试用户
- [ ] 每人使用 3 天
- [ ] 收集反馈
- [ ] 分析数据

**测试场景：**
1. 阅读技术文章（Medium, Dev.to）
2. 阅读新闻（BBC, CNN）
3. 阅读论文（arXiv）
4. 阅读小说片段

**成功标准：**
- ✅ 3/5 用户连续使用3天
- ✅ 2/5 用户愿意推荐
- ✅ 4/5 用户认为有帮助

---

## 📋 任务优先级

### P0（本周必须完成）
1. ✅ 中文翻译已完成
2. ⚠️ 英文解释增强
3. ⚠️ 词汇统计完善
4. ⚠️ 基础自动化测试

### P1（下周完成）
5. ⚠️ 用户体验优化
6. ⚠️ MVP验证准备
7. ⚠️ Bug修复

### P2（可选）
8. 发音功能
9. 键盘快捷键
10. 高级统计图表

---

## 🎯 验收标准

### 第一阶段完成标准

**功能完整性：**
- [x] 难词标注工作正常
- [x] 中文翻译可用（97%覆盖）
- [ ] 英文定义优先显示
- [ ] 发音功能可用
- [x] 难度调节正常
- [x] 词库功能完整
- [ ] 统计数据准确

**质量标准：**
- [ ] 测试覆盖率 > 70%
- [ ] 页面加载延迟 < 2秒
- [ ] 无严重bug
- [ ] 文档完整

**用户验证：**
- [ ] 3个真实用户测试
- [ ] 连续使用3天
- [ ] 正面反馈 > 60%

---

## 📊 进度追踪

| 任务 | 负责 | 进度 | 预计完成 |
|------|------|------|----------|
| 英文解释API | - | 0% | Day 3 |
| Tooltip UI优化 | - | 0% | Day 5 |
| 发音功能 | - | 0% | Day 7 |
| 词汇统计 | - | 0% | Day 4 |
| 性能优化 | - | 0% | Day 6 |
| 自动化测试 | - | 20% | Day 5 |
| 用户测试 | - | 0% | Day 10 |

---

## 💡 下一步行动

### 立即开始（现在）
1. **创建英文定义 API 集成**
   ```python
   # backend/main.py
   async def get_simple_definition(word: str) -> str:
       # 调用 Free Dictionary API
       # 提取第一个定义
       # 简化到 < 20 词
       pass
   ```

2. **优化 Tooltip UI**
   ```javascript
   // frontend/content.js
   function createTooltip(word, data) {
       // 英文定义在前
       // 中文翻译可折叠
       // 添加发音按钮
   }
   ```

3. **添加基础测试**
   ```bash
   cd backend
   pip install -r requirements-dev.txt
   pytest tests/test_api.py -v
   ```

---

**准备好开始了吗？** 🚀

从**任务1: 英文解释增强**开始！
